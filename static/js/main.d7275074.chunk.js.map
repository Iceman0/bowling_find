{"version":3,"sources":["img/persik.png","panels/Home.js","utils/sendCLick.js","panels/Persik.js","App.js","index.js"],"names":["module","exports","bufColumns","title","dataIndex","key","Home","id","fetchedUser","go","useState","name","setName","findResult","setFindResult","columns","setColumns","btnFindClick","SPREADSHEET_ID","auth","CLIENT_EMAIL","SHEET_ID","client_email","PRIVATE_KEY","private_key","doc","GoogleSpreadsheet","row","a","useServiceAccountAuth","loadInfo","sheet","sheetsById","getRows","result","console","error","appendSpreadsheet","Name","then","value","length","_sheet","headerValues","dataSource","map","item","Object","assign","i","filter","find","indexOf","catch","btnSendClick","before","photo_200","src","description","city","first_name","last_name","className","top","type","placeholder","onChange","e","target","size","onClick","scroll","x","osName","platform","Persik","props","left","data-to","IOS","persik","alt","App","activePanel","setActivePanel","setUser","popout","setPopout","useEffect","bridge","send","user","subscribe","detail","data","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","currentTarget","dataset","to","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d7275074.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/persik.4e1ec840.png\";","import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport {FormLayout, FormLayoutGroup, Input, Snackbar, Icon24Favorite} from '@vkontakte/vkui/';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Cell from '@vkontakte/vkui/dist/components/Cell/Cell';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\nimport bridge from '@vkontakte/vk-bridge';\nimport {btnSendClick} from './../utils/sendCLick'\nimport {Row, Col, Table} from 'antd'\nimport 'antd/dist/antd.css';\n\nconst orangeBackground = {\n    backgroundImage: 'linear-gradient(135deg, #ffb73d, #ffa000)'\n};\n\nconst dataSource = [\n    {\n        key: '1',\n        name: 'Mike',\n        age: 32,\n        address: '10 Downing Street',\n    },\n    {\n        key: '2',\n        name: 'John',\n        age: 42,\n        address: '10 Downing Street',\n    },\n];\n\nconst bufColumns = [\n    {\n        title: 'Name',\n        dataIndex: 'name',\n        key: 'name',\n    },\n    {\n        title: 'Age',\n        dataIndex: 'age',\n        key: 'age',\n    },\n    {\n        title: 'Address',\n        dataIndex: 'address',\n        key: 'address',\n    },\n];\n\nconst Home = ({ id, go, fetchedUser }) => {\n\n    // const [count, setCount] = useState(0);\n    const [name, setName] = useState(\"\");\n    const [findResult, setFindResult] =  useState([]);\n    const [columns, setColumns] =  useState(bufColumns);\n\n    // const onChange = (e) => {\n    //     let { value } = e.currentTarget;\n    //     if (((value <= 300 && value >= 0) || value === '')) setCount( (value === '') ? value : parseInt(value) );\n    // };\n\n    const btnFindClick = (name) => {\n        btnSendClick(name, setFindResult, setColumns)\n    };\n\n    return (<Panel id={id}>\n            <PanelHeader>Введите свой результат</PanelHeader>\n            {fetchedUser &&\n            <Group title=\"User Data Fetched with VK Bridge\">\n                <Cell\n                    before={fetchedUser.photo_200 ? <Avatar src={fetchedUser.photo_200}/> : null}\n                    description={fetchedUser.city && fetchedUser.city.title ? fetchedUser.city.title : ''}\n                >\n                    {`${fetchedUser.first_name} ${fetchedUser.last_name}`}\n                </Cell>\n            </Group>}\n\n            <Group title=\"Navigation Example\">\n                <Div>\n                    <FormLayout className=\"bowl-Form\">\n                        <FormLayoutGroup top=\"Поиск\">\n                            <Input type=\"text\" value={name} placeholder=\"Введите необходимые слова\" onChange={e => setName(e.target.value)}/>\n                        </FormLayoutGroup>\n                        <Button size=\"xl\" onClick={() => btnFindClick(name)}>Найти</Button>\n                    </FormLayout>\n                    {(findResult && findResult.length > 0) ? <Table dataSource={findResult} columns={columns} scroll={{ x: 1500 }} /> : ''}\n                </Div>\n            </Group>\n        </Panel>\n    );\n};\n\nHome.propTypes = {\n    id: PropTypes.string.isRequired,\n    go: PropTypes.func.isRequired,\n    fetchedUser: PropTypes.shape({\n        photo_200: PropTypes.string,\n        first_name: PropTypes.string,\n        last_name: PropTypes.string,\n        city: PropTypes.shape({\n            title: PropTypes.string,\n        }),\n    }),\n};\n\nexport default Home;\n","import bridge from '@vkontakte/vk-bridge';\r\n//import * from jQuery;\r\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\r\nimport auth from './auth.json';\r\n\r\nexport const btnSendClick = (name, setFindResult, setColumns) => {\r\n\r\n// Config variables\r\n    const SPREADSHEET_ID = auth.SPREADSHEET_ID;\r\n    const SHEET_ID = auth.SHEET_ID;\r\n    const CLIENT_EMAIL = auth.client_email;\r\n    const PRIVATE_KEY = auth.private_key;\r\n\r\n    const doc = new GoogleSpreadsheet(SPREADSHEET_ID);\r\n\r\n    const appendSpreadsheet = async (row) => {\r\n        try {\r\n            await doc.useServiceAccountAuth({\r\n                client_email: CLIENT_EMAIL,\r\n                private_key: PRIVATE_KEY,\r\n            })\r\n            // loads document properties and worksheets\r\n            await doc.loadInfo();\r\n\r\n            const sheet = doc.sheetsById[\"443542541\"];\r\n            const result = await sheet.getRows();\r\n            return(result);\r\n        } catch (e) {\r\n            console.error('Error: ', e);\r\n            return([]);\r\n        }\r\n    };\r\n\r\n    const newRow = { Name: name};\r\n\r\n    appendSpreadsheet(newRow)\r\n        .then((value) => {\r\n            let columns = (value.length) ? value[0]._sheet.headerValues : [];\r\n\r\n            let dataSource = value.map(item => {\r\n                let result = Object.assign({}, item);\r\n                for(let i in result) {\r\n                    if (i[0] === '_') delete result[i];\r\n                }\r\n                if (result.id) result.key = result.id;\r\n                return result;\r\n            }).filter(item => {\r\n                if (!name) return item;\r\n                let find = false;\r\n                for (let i in item) {\r\n                    if (typeof item[i] === 'string' && item[i].indexOf(name) > -1) {\r\n                        find = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (find) return item;\r\n            });\r\n            for(let i = 0; i<columns.length; i++) {\r\n                columns[i] = {\r\n                    title: columns[i],\r\n                    dataIndex: columns[i],\r\n                    key: columns[i]\r\n                }\r\n            }\r\n            setColumns(columns);\r\n            setFindResult(dataSource);\r\n        })\r\n        .catch((error) => console.error(error));\r\n    //alert(JSON.stringify({name: name, surname: surname, team: team, count: count}));\r\n};\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { platform, IOS } from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nimport persik from '../img/persik.png';\nimport './Persik.css';\n\nconst osName = platform();\n\nconst Persik = props => (\n\t<Panel id={props.id}>\n\t\t<PanelHeader\n\t\t\tleft={<PanelHeaderButton onClick={props.go} data-to=\"home\">\n\t\t\t\t{osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t</PanelHeaderButton>}\n\t\t>\n\t\t\tPersik\n\t\t</PanelHeader>\n\t\t<img className=\"Persik\" src={persik} alt=\"Persik The Cat\"/>\n\t</Panel>\n);\n\nPersik.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n};\n\nexport default Persik;\n","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Persik from './panels/Persik';\n\nconst App = () => {\n    const [activePanel, setActivePanel] = useState('home');\n    const [fetchedUser, setUser] = useState(null);\n    const [popout, setPopout] = useState(null);\n\n    useEffect(() => {\n        bridge.subscribe(({ detail: { type, data }}) => {\n            if (type === 'VKWebAppUpdateConfig') {\n                const schemeAttribute = document.createAttribute('scheme');\n                schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n                document.body.attributes.setNamedItem(schemeAttribute);\n            }\n        });\n        async function fetchData() {\n            const user = await bridge.send('VKWebAppGetUserInfo');\n            setUser(user);\n            setPopout(null);\n        }\n        fetchData();\n    }, []);\n\n    const go = e => {\n        setActivePanel(e.currentTarget.dataset.to);\n    };\n\n    return (\n        <View activePanel={activePanel} popout={popout}>\n            <Home id='home' fetchedUser={fetchedUser} go={go} />\n            <Persik id='persik' go={go} />\n        </View>\n    );\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}